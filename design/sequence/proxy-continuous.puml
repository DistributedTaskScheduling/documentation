@startuml

'This file is the same as proxy-one-message.puml except the SSHConnection is continuous 
'instead of created/destroyed for each Message.

box "Local components"
    boundary Boundary
    participant Command
    participant ContinuousProxy as Proxy
    participant SSHConnection
    participant Response
end box

Boundary -> Proxy ++ : Command
'Proxy -> SSHConnection ** : Create
Proxy -> SSHConnection ++ : Command
SSHConnection -> Remote ** : Call via shell, YAML as argument
activate Remote
... Remote processes Command, sets environment variable for Response ...
SSHConnection <- Remote -- : Return
destroy Remote
SSHConnection -> SSHConnection: Read environment variable
SSHConnection -> Response ** : Create
Proxy <- SSHConnection -- : Response
'Proxy -> SSHConnection !!
Boundary <- Proxy -- : Response

destroy Response

@enduml
